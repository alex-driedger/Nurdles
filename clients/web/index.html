<html>

<head>
    <title>Marine Debris App</title>
    <!-- Load the stylesheets -->
    <link rel="stylesheet" href="libs/bootstrap/dist/css/bootstrap.css" type="text/css" media="screen" charset="utf-8" />
    <link rel="stylesheet" href="libs/bootstrap-datetimepicker/css/bootstrap-datetimepicker.css" type="text/css" media="screen" charset="utf-8" />
    <link rel="stylesheet" href="css/styles.css" >
    <link rel="stylesheet" type="text/css" href="libs/jquery-ui/themes/base/jquery-ui.css"></link>
    <script src='https://api.tiles.mapbox.com/mapbox.js/v1.6.1/mapbox.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox.js/v1.6.1/mapbox.css' rel='stylesheet' />
    <!-- Load the app using main.js -->
    <script data-main="js/main" src="libs/require/require.js"></script>
</head>

<body>
        <div id="content"></div>
        <script>
        function initializeAutocomplete (BeachModel) {
          $( "#beachname" ).autocomplete({
          select: function (event, ui) {
            $("#beachname").val(ui.item.label)
            $("#beachname")[0].beachName = ui.item.label
            $("#beachname")[0].beachID = ui.item.id
            return false;
          },
          source: function(request, callback) {
            beaches = new BeachModel.Collection([],{data: $("#beachname").val()});
            beaches.fetch( {
                success: function( collection, response, options) {
                var availableTags = [];
                for (i in collection.models)
                {
                    availableTags.push({label: collection.models[i].attributes.beachName, desc: "City: "+collection.models[i].attributes.city, id: collection.models[i].attributes._id})
                }
                callback(availableTags)
                },
                failure: function( collection, response, options) {
                    $('#content').html("An error has occured.");                    
                }
            });
          } 
        })
        // Now change the ui-autocomplete data by calling renderItem on it. If you return none
        .data( "ui-autocomplete" )._renderItem = function( ul, item ) {
          // I have no idea how appendTo(ul) works. (I'm assuming every item in dropdown is a ul)
          return $( "<li>" ).append( "<a><span style='color: #3AF; text-transform: capitalize;'>" + item.label + "</span><br><span style='font-size: 0.75em'>" + item.desc + "</span></a>" ).appendTo( ul );
          };
    }
        </script>
		<script src="libs/jquery/jquery-2.0.3.js"></script>
        <script src="libs/jquery-color/jquery-color.js"></script>
        <script src="libs/bootstrap/dist/js/bootstrap.js"></script>
        <script src="libs/bootstrap-datetimepicker/js/bootstrap-datetimepicker.min.js"></script>
        <script src="libs/jquery-ui/ui/jquery-ui.js"></script>
</body>

</html>