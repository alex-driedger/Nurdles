<div class="header bordered">
    Your Filters
</div> 

<div class="filters-wrapper accordion">
    <% _.each(filters, function(filter) { %>
    <div class="saved-filter clearfix collapsed notExpanded">
        <div class="pull-left">
            <%=filter.name %>
        </div>
        <div class="pull-right">
            <div class="collapsed-checkbox">
                <input id="<%= filter._id %>" class="checkbox" type="checkbox" />
            </div>
        </div>
    </div>
    <div id="<%= filter._id %>-container" class="filter-operands-container clearfix">
            <table id="<%= filter._id %>-table" class="table table-condensed" style="margin-bottom: 0px;">
                    <tr>
                        <td colspan="2">
                            Type:
                        </td>
                        <td colspan="2">
                            Value:
                        </td>
                    </tr>

                    <% var counter = 0; %>
                    <% _.each(filter.operators, function(operator) { %>

                    <tr>
                    <td>
                        <select id="<%= counter + '-' + filter._id + '-property' %>" class="wide-30 savedFilter">
                            <% _.each(features, function(feature) { %>
                            <option value="<%= feature.name %>" <% if (operator.property == feature.name) { %> selected <% } %>><%= feature.name %></option>
                            <% }); %>
                        </select>
                    </td>
                    <td>
                        <select id="<%= counter + '-' + filter._id + '-type' %>" class="wide-30 savedFilter">
                            <option value="<%= operator.type %>"><%= operator.type %></option>
                        </select>
                    </td>
                    <td> 
                        <input id="<%=counter + '-' + filter._id + '-lower' %>" type="text" class="wide-90 savedFilter" value="<%= operator.value ? operator.value : operator.lowerBoundary %>" />
                    </td>
                    <td> 
                        <input id="<%=counter + '-' + filter._id + '-upper' %>" type="text" class="wide-90 savedFilter" value="<%= operator.upperBoundary %>" />
                    </td>
                    <td>
                        <div class="plus-minus-container minus">
                            <img id="<%=counter + '-' + filter._id%>" src="../../img/minus.png" class="icon-small vertical-5 delete-row" />
                        </div>
                    </td>
                </tr>

                    <% counter++; %>
                <% }); %>
                <tr>
                    <td>
                        <select id="<%= filter._id %>-newProperty" class="wide-30">
                            <% _.each(features, function(feature) { %>
                                <option value="<%= feature.name %>"><%= feature.name %></option>
                            <% }); %>
                        </select>
                    </td>
                    <td>
                        <select id="<%= filter._id %>-newType" class="wide-30">
                            <% _.each(types, function(type) { %>
                                <option value="<%= type %>"><%= type %></option>
                            <% }); %>
                        </select>
                    </td>
                    <td> 
                        <input id="<%= filter._id %>-newLower" type="text" class="wide-90" />
                    </td>
                    <td> 
                        <input id="<%= filter._id %>-newUpper" type="text" class="wide-90" />
                    </td>
                    <td>
                        <div id="<%= filter._id %>-addOperator" class="plus-minus-container">
                            <img src="../../img/plus.png" class="icon-small vertical-5 add-row" />
                        </div>
                    </td>
                </tr>
            </table>
            <div class="pull-right padded">
                <button id="<%= filter._id %>-remove" class="btn btn-small btn-danger deleteFilter"> Remove </button>
                <button id="<%= filter._id %>-save" class="btn saveFilter"> Save </button>
            </div>
        </div>
    <% }); %>
</div>
